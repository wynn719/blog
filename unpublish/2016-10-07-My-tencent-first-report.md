---
title: 腾讯转正述职演讲逐字稿
---

> 注意：
> 1. 产品相关：
> q: KM与乐享的区别是什么
> a: KM针对的用户是3万多腾讯内部的精英用户，已经形成了良好的企业文化，有知识分享的习惯，而乐享针对的用户主要是小型独立公司的用户，这些公司的需要的是一个能够立即供自己公司投入使用的知识管理社区，而不需要自己动用人力物力独立去开发和维护这么一套系统。
> 2. PPT相关：
> * 所使用的新技术需要了解，避免老大问到了技术的特点，新技术可以适当的列出图标
> * 个人计划可以列多个小点，比如向组内人员学习，新技术的学习，后台技术的学习等

**PPT注重点**

* KM与乐享技术架构对比
* K吧主页的自定义（载入的几种方案[前端输出，后台输出，前后端同输出]，区块结构后续可拓展性）
* 图片上传控件设计（兼容IE9的几种方法探索，可复用性，多例问题，Seajs带来的资源重复载入解决，使用的简易性）
* 多级选择器（对比KM上的多级组件选择器的实现，安全性）
* 新技术尝试（ES6，Vue）

大家下午好，我叫郑柏伟，RTX 名叫 Wynnezheng，来自研发管理部 KM 平台中心，导师是 Cattyhuang。在试用期期间主要负责的是 KM 的外网产品乐享的PC端与移动端的前端开发。

[切PPT]

本次述职的内容主要包括以下几点，在这3个月的试用期期间，我在乐享这个项目主要的工作职责，我的工作成果，这期间工作给予我的心得体会以及接下自己定下的一些个人计划与目标。

[切PPT 工作内容]

[切PPT 熟悉项目技术架构]

作为开发，前期主要还是熟悉乐享的技术架构。乐享是一个新的项目，所以相对于 KM ，乐享在技术选型上有更多的空间，受到旧有业务的干扰要小很多，同时也参考了 KM 在技术方面上的一些良好的实践。

从前端的架构对比，KM 的前端主要使用的技术有 jQuery、LESS、Seajs 和 Grunt 等，而后台主要使用的是 CakePHP 1.0 和 Laravel 4.0 的少部分功能。

乐享在结合 KM 的良好实践下保留了一些技术选型，引进了一些新的技术。前端包括 jQuery、LESS、Seajs 的同时还引入了现在比较流行的 ES6、Vue.js、Gulp 和 Webpack 等，ES6 有助于编写更加规范化的 JavaScript 代码，Vue.js 弥补了 jQuery 复杂组件的代码维护问题，Gulp 和 webpack 可以减少许多重复的编译打包的自动化工作；而后台全面使用了代码优雅的 Laravel 5.2 ，并且使用了绝大多数功能，主要作用是提升编码效率，解决 PHP 代码的维护问题。

[切PPT K吧主页的自定义]

K吧自定义主页主要是将后台传过来的带有权重标识的模块按照管理员自定义排序的方式展现，一开始考虑的方案是类似于KM的K吧一样使用后台PHP进行模板渲染，但是这样有个问题：
* 由于是一次性对全部的数据进行拉取和视图渲染，当用户的数据过于庞大时，会导致页面的载入时间过长
* 由于是循环顺序输出，对相似区块的复用性不好，维护困难
另一种方案是纯前端输出，但也有一些问题存在：
* 异步载入的模块时间不可预测，无法把控模块在视图的插入时机
最后，折衷方案选择的是前后端协作输出：后端通过映射数组渲染模块的特定容器和顺序，同时输出系统的自定义模块，而前端负责异步加载耗时的系统模块（日历，最新文档，最近加入等），加载完成后再插入映射的指定的容器，前后端维护同一份映射表，这样做就解决了上面的问题。

[切PPT 图片上传控件设计，多级选择器]

**图片上传控件**

这个需求主要是实现乐享统一的通用图片上传插件，在做这个组件时定位的问题有以下几个：

* 引入方式（PHP引入）
* 易用性（配置参数非必须，可配置项精简）

引入方式最终抛弃JS引入的方法，主要原因是JS引入对DOM的可维护性差，当面临组件视觉更改的时候，JS生成的组件视图结构修改很繁琐，代码乱，不易阅读，无法保证组件插入页面后的可调整性。

易用性体现在配置项上，引用该组件的方式只需要使用单文件的引入就可以了，不需要再引入其他CSS和JS文件，配置参数全部为可选，也就意味基本不需要配置参数的传入。

开发中也遇到了一些问题，有以下几个：

* Seajs的模块加载机制导致的静态资源重复加载的问题（依赖包之间引入时没有做Seajs的模块改造导致资源载入顺序不可控）

解决方式是对该组件的依赖包进行改造，在支持Seajs的模块加载机制的同时也向下做了兼容，使得普通模块的加载也同样可以使用。

**多级选择器**

这个需求主要是实现跟KM类似的多级选择器，需要支持无限级菜单。参考了原有KM的代码，KM的多级选择器因为历史问题导致整个多级选择器过于复杂，对选择器做了多级的嵌套循环。而乐享的多级选择器的需求比较明确，因此采用了纯JS Seajs引入的方式做，同时把多级嵌套交由后端的数据决定，递归输出。其中也遇到一些问题，主要有包括组件的重用问题。

原有的实现方式是单例模式组件，也就是说组件在页面中只有一个，但是后续遇到的需求是需要对组件进行销毁后再重置，也就是说原有的单例模式销毁后组件状态依旧存在，就不符合现在的需求，因此主要对组件进行了重构，改成多例模式，解决单例模式带来的问题。

[切PPT 新技术尝试 ES6]

乐享引入了一些新的技术，例如ES6。但是为了快速迭代，所以项目中很少使用这些新的技术，正好自己对ES6有所了解，也很感兴趣，所以在后续的开发中，在保证项目正常运行的情况下开始使用ES6的新的规范。

ES6的规范是已经通过了W3C的标准认可，但还没有推广开来，可以使用Babel对现有的ES6做转码达到向下兼容的目的。在后续ES6得到全面的支持后，项目只需要在移除Babel编译器，就可以做到JS到新版本的平滑切换，而不用担心后续出现的规范不统一的问题；同时在现有支持ES6的浏览器上，ES6带来的特性可以加快浏览器对JS的运行速度以及编码的效率，避免JS被人所诟病的一些遗留问题。

[切PPT 新技术尝试 Vue.js]

在回校的时间里我有使用过Vue.js开发过一些小的demo，其中包括对MVVM和webpack模式的学习，但是对Vue.js的底层实现还没有做深入的研究过，来到乐享后，由于乐享是一个新的项目，对新技术的实践具有更大的容错性，而且我的导师catty对Vue.js这个新的MVVM框架也比较认可，所以乐享最近在移动端先引入了Vue.js，同时也引入了Vue.js配套的webpack等工具，用common.js的模块规范代替了原有的Seajs。

最近也开始深入Vue.js的学习，理解MVVM的思想，构建新的前端开发模式。

[切PPT 个人计划]

1. 个人前端技术以及后台技术的持续提高
2. 时间管理，每天空出时间做代码阅读和新技术的学习
3. 学习产品相关的知识

[切PPT 致谢]

很幸运能够来到KM平台中心，在此要感谢下从实习到现在组内小伙伴们的照顾和帮助，让我学习到了很多知识。谢谢。




