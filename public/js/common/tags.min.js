$(function(){function t(t,a){for(var s=[],n=0,i=t.length;i>n;n++)for(var l=t[n],e=l.tags,o=0,f=e.length;f>o;o++)if(e[o]===a){s.push(l);break}return s}function a(t){for(var a=[],s="",n=0,i=t.length;i>n;n++){var l='<li class="post-li"><a class="post-name" title="'+t[n].title+'" href="'+t[n].url+'">'+t[n].title+'</a><span class="post-date">'+t[n].date+"</span></li>";a.push(l)}s=a.join(""),$(".tag-posts").find(".posts").html(s)}function s(t,a){var s=$(".tag-posts").find(".loading"),a=a?a:"loading...";s.text(a),t?s.removeClass("hide"):s.addClass("hide")}function n(){$(".tags").find(".all").trigger("click")}$(".tags").delegate(".tag","click",function(n){var i=$(this),l=i.text();$(".tag-posts").find(".posts").empty(),s(!0),$(".tag-posts").find(".tag-name").text(l),$.ajax({url:baseurl+"/json_api/posts/",type:"GET",dataType:"json"}).done(function(n){i.hasClass("all")?a(n,l):a(t(n,l)),s(!1)}).fail(function(){s(!0,"fail!")}).always(function(){})}),n()});